# 🎯 Cursor CLI 3가지 모드 완벽 가이드

## 📑 목차

- [개요](#개요)
- [1. 대화형 Agent 모드](#1-대화형-agent-모드)
- [2. Shell Mode](#2-shell-mode)
- [3. 비대화형 모드](#3-비대화형-모드)
- [모드 비교표](#모드-비교표)
- [실전 활용 시나리오](#실전-활용-시나리오)

---

## 개요

Cursor CLI는 **3가지 모드**로 사용할 수 있습니다:

```
┌─────────────────────────────────────────────────────────────┐
│  Cursor CLI 3가지 모드                                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1️⃣ 대화형 Agent 모드                                      │
│     cursor agent                                            │
│     → 코드 작성, 분석, 리팩토링 (대화하며 진행)             │
│                                                             │
│  2️⃣ Shell Mode                                             │
│     cursor agent --shell                                    │
│     → 터미널 명령어 생성 (자연어 → 명령어)                  │
│                                                             │
│  3️⃣ 비대화형 모드                                          │
│     cursor agent "질문"                                     │
│     → 자동화/스크립트용 (한 번 실행)                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 1. 대화형 Agent 모드

### 🎯 무엇인가?

**코드 작성, 분석, 리팩토링을 대화하며 진행하는 모드**

지금 우리가 대화하는 것처럼, Agent와 자연스럽게 대화하며 코드 작업을 합니다.

### 시작 방법

```bash
cursor agent
```

### 특징

- ✅ **대화 컨텍스트 유지**: "그것", "이전 파일" 같은 표현 가능
- ✅ **단계별 진행**: 한 번에 완벽한 질문 안 해도 됨
- ✅ **코드 직접 수정**: 파일 읽기/쓰기/수정 가능
- ✅ **실수 수정 가능**: 잘못된 방향이면 바로 수정 요청
- ✅ **무제한 대화**: 원하는 만큼 계속 대화 가능

### 실전 예시

```bash
$ cursor agent

> 이 프로젝트에서 가장 큰 파일 5개 찾아줘

Agent: 다음 5개 파일이 가장 큽니다:
  1. src/App.tsx (2.3MB)
  2. src/utils/helpers.ts (1.8MB)
  ...

> 첫 번째 파일 내용 요약해줘

Agent: App.tsx는 메인 애플리케이션 컴포넌트로...

> 리팩토링 필요한 부분 있어?

Agent: 네, 3가지 개선점이 있습니다:
  1. 500줄 함수를 분리
  2. 중복 코드 제거
  3. 타입 안정성 개선

> 첫 번째부터 적용해줘

Agent: handleSubmit 함수를 분리하겠습니다...
[파일 수정 중...]

> 테스트 코드도 작성해줘

Agent: App.test.tsx를 생성했습니다...
```

### 언제 사용?

- ✅ **복잡한 문제 해결**: 단계별로 접근
- ✅ **코드베이스 탐색**: 질문하며 이해
- ✅ **리팩토링**: 점진적으로 개선
- ✅ **버그 추적**: 대화하며 원인 찾기
- ✅ **학습**: 코드 설명 들으며 배우기

### 주요 명령어

```bash
# 대화 중 사용 가능한 슬래시 명령
/models      # 모델 변경
/rules       # Rules 관리
/compress    # 컨텍스트 압축
/mcp         # MCP 서버 관리

# 대화 종료
> exit
```

---

## 2. Shell Mode

### 🎯 무엇인가?

**자연어를 터미널 명령어로 변환해주는 모드**

복잡한 터미널 명령어를 외울 필요 없이, 하고 싶은 작업을 자연어로 설명하면 명령어를 생성해줍니다.

### 시작 방법

```bash
cursor agent --shell
```

### 특징

- ✅ **명령어 생성**: 자연어 → 터미널 명령어
- ✅ **실행 전 확인**: 명령어 보여주고 실행 여부 물어봄
- ✅ **안전함**: 위험한 명령은 경고
- ✅ **학습 효과**: 생성된 명령어 보며 배움
- ✅ **코드 수정 안 함**: 명령어만 생성 (파일 직접 수정 X)

### 실전 예시

```bash
$ cursor agent --shell

> 최근 3일 내 수정된 tsx 파일 찾아줘

AI: find . -name "*.tsx" -mtime -3
실행할까요? [Y/n] y

결과:
./src/components/Button.tsx
./src/pages/Home.tsx
./src/layouts/Main.tsx

> 이 파일들 크기순으로 정렬해줘

AI: find . -name "*.tsx" -mtime -3 -exec ls -lh {} \; | sort -k5 -hr
실행할까요? [Y/n] y

결과:
-rw-r--r--  1 user  staff   45K  Jan 13 10:30 ./src/pages/Home.tsx
-rw-r--r--  1 user  staff   23K  Jan 13 09:15 ./src/layouts/Main.tsx
-rw-r--r--  1 user  staff   12K  Jan 13 11:20 ./src/components/Button.tsx

> 8080 포트 사용하는 프로세스 찾아서 종료해줘

AI: lsof -ti:8080 | xargs kill -9
⚠️  이 명령은 프로세스를 강제 종료합니다.
실행할까요? [Y/n] y

프로세스 12345 종료됨
```

### 언제 사용?

- ✅ **복잡한 명령어 모를 때**: find, grep, awk 등
- ✅ **파일 시스템 작업**: 파일 찾기, 정렬, 필터링
- ✅ **프로세스 관리**: 포트 확인, 프로세스 종료
- ✅ **Git 작업**: 복잡한 git 명령어
- ✅ **패키지 관리**: npm, yarn 명령어
- ✅ **시스템 모니터링**: 메모리, CPU 확인

### 대화형 Agent 모드와의 차이

| 항목 | 대화형 Agent | Shell Mode |
|------|-------------|-----------|
| **목적** | 코드 작성/수정 | 명령어 생성 |
| **파일 수정** | ✅ 가능 | ❌ 불가 |
| **컨텍스트** | 유지됨 | 각 명령 독립 |
| **출력** | 코드 변경사항 | 명령어 + 실행 결과 |
| **사용 예** | "리팩토링해줘" | "파일 찾아줘" |

---

## 3. 비대화형 모드

### 🎯 무엇인가?

**한 번 실행하고 끝나는 모드 (자동화/스크립트용)**

대화 없이 질문 하나만 던지고 결과를 받습니다.

### 시작 방법

```bash
# 기본
cursor agent "질문"

# 출력만 (print-only)
cursor agent -p "질문"

# JSON 출력
cursor agent -p --output-format json "질문"
```

### 특징

- ✅ **즉시 실행**: 대화 없이 바로 결과
- ✅ **스크립트 가능**: 반복문, 파이프라인에서 사용
- ✅ **자동화**: CI/CD에서 활용
- ✅ **컨텍스트 없음**: 각 실행이 독립적
- ✅ **빠름**: 대화 오버헤드 없음

### 실전 예시

#### 간단한 질문

```bash
# 한 번에 실행
cursor agent "package.json의 의존성 업데이트해줘"

# 출력만
cursor agent -p "이 프로젝트 구조 설명해줘"
```

#### 스크립트에서 사용

```bash
#!/bin/bash

# 모든 하위 디렉토리에서 테스트 실행
for dir in */; do
  cd "$dir"
  echo "Testing $dir..."
  cursor agent "테스트 실행하고 결과 요약해줘"
  cd ..
done
```

#### CI/CD 파이프라인

```yaml
# .github/workflows/pr-review.yml
- name: AI Code Review
  run: |
    cursor agent -p "이 PR의 변경사항 분석하고 잠재적 문제점 찾아줘" >> review.md
```

#### JSON 출력

```bash
# 분석 결과를 JSON으로
cursor agent -p --output-format json "프로젝트 구조 분석해줘" > analysis.json

# jq로 파싱
cat analysis.json | jq '.dependencies'
```

### 언제 사용?

- ✅ **반복 작업**: 여러 폴더에서 같은 작업
- ✅ **CI/CD**: 자동화된 검증
- ✅ **배치 처리**: 대량 파일 처리
- ✅ **간단한 질문**: 한 번에 답 얻기
- ✅ **스크립트 통합**: 다른 도구와 연계

---

## 모드 비교표

| 항목 | 대화형 Agent | Shell Mode | 비대화형 |
|------|-------------|-----------|---------|
| **시작** | `cursor agent` | `cursor agent --shell` | `cursor agent "질문"` |
| **목적** | 코드 작성/수정 | 명령어 생성 | 자동화 |
| **대화** | ✅ 계속 가능 | ✅ 계속 가능 | ❌ 한 번만 |
| **컨텍스트** | ✅ 유지 | ⚠️ 명령별 독립 | ❌ 없음 |
| **파일 수정** | ✅ 가능 | ❌ 불가 | ✅ 가능 |
| **명령 실행** | ⚠️ 제한적 | ✅ 주 기능 | ⚠️ 제한적 |
| **실행 확인** | - | ✅ 물어봄 | - |
| **스크립트** | ❌ 어려움 | ⚠️ 가능 | ✅ 쉬움 |
| **학습** | ✅ 최고 | ✅ 좋음 | ⚠️ 보통 |

---

## 실전 활용 시나리오

### 시나리오 1: 버그 수정

**대화형 Agent 모드 사용** ✅

```bash
cursor agent

> UserProfile에서 아바타가 안 보이는 버그 있어
> localStorage 확인해줘
> avatarUrl이 null인 이유 찾아줘
> 고쳐줘
> 테스트도 작성해줘
```

**이유**: 단계별로 원인을 찾고 수정해야 하므로

### 시나리오 2: 로그 파일 분석

**Shell Mode 사용** ✅

```bash
cursor agent --shell

> 최근 1시간 에러 로그 찾아줘
> 가장 많이 발생한 에러 TOP 5
> 각 에러의 발생 횟수 세어줘
```

**이유**: 파일 검색/필터링 명령어가 필요하므로

### 시나리오 3: PR 자동 리뷰

**비대화형 모드 사용** ✅

```bash
# CI/CD에서
cursor agent -p "이 PR의 변경사항 분석하고 문제점 찾아줘" >> review.md
```

**이유**: 자동화된 프로세스에서 한 번만 실행하므로

### 시나리오 4: 리팩토링

**대화형 Agent 모드 사용** ✅

```bash
cursor agent

> UserProfile.tsx 분석해줘
> 어떻게 개선할 수 있어?
> 컴포넌트 분리해줘
> 테스트 추가해줘
> 타입 안정성 개선해줘
```

**이유**: 점진적으로 개선하며 대화가 필요하므로

### 시나리오 5: 대용량 파일 정리

**Shell Mode 사용** ✅

```bash
cursor agent --shell

> 1GB 이상 파일 찾아줘
> node_modules 제외하고
> 크기순으로 정렬해줘
```

**이유**: 파일 시스템 명령어가 필요하므로

### 시나리오 6: 여러 프로젝트 일괄 업데이트

**비대화형 모드 사용** ✅

```bash
for dir in project-*/; do
  cd "$dir"
  cursor agent "package.json 의존성 업데이트해줘"
  cd ..
done
```

**이유**: 반복 작업을 자동화하므로

---

## 💡 모드 선택 가이드

### 코드 작업이 필요한가?

**YES** → **대화형 Agent 모드**
- 파일 읽기/쓰기/수정
- 리팩토링
- 버그 수정
- 새 기능 추가

**NO** → 다음 질문으로

### 터미널 명령어가 필요한가?

**YES** → **Shell Mode**
- 파일 찾기/정렬
- 프로세스 관리
- Git 작업
- 시스템 모니터링

**NO** → 다음 질문으로

### 자동화/스크립트인가?

**YES** → **비대화형 모드**
- CI/CD
- 배치 처리
- 반복 작업

**NO** → **대화형 Agent 모드** (기본 선택)

---

## 🎓 학습 순서

### 1단계: 대화형 Agent 마스터

```bash
cursor agent

# 기본 대화 연습
> 이 프로젝트 구조 설명해줘
> 주요 컴포넌트는?
> 데이터 플로우는?
```

### 2단계: Shell Mode 익히기

```bash
cursor agent --shell

# 명령어 생성 연습
> 최근 수정된 파일 찾아줘
> 큰 파일 찾아줘
> 프로세스 확인해줘
```

### 3단계: 비대화형 활용

```bash
# 스크립트 작성
cursor agent "간단한 질문"

# 자동화 구축
```

---

## 🚀 핵심 정리

### 3가지 모드의 역할

```
대화형 Agent 모드 (cursor agent)
  → 코드 작업의 메인 도구
  → 80% 이상 사용

Shell Mode (cursor agent --shell)
  → 터미널 명령어 생성 전용
  → 15% 정도 사용

비대화형 모드 (cursor agent "질문")
  → 자동화/스크립트 전용
  → 5% 정도 사용
```

### 기억할 것

- ✅ **대화형이 기본**: 모르면 `cursor agent`
- ✅ **Shell Mode는 명령어 전용**: 코드 수정 안 함
- ✅ **비대화형은 자동화용**: 대화 필요하면 대화형 사용
- ✅ **각 모드의 목적이 다름**: 상황에 맞게 선택

---

**Cursor CLI의 3가지 모드를 마스터하세요! 🚀**